<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Akilarの糖果屋</title>
  
  <subtitle>Akilar.top</subtitle>
  <link href="https://akilar.top/atom.xml" rel="self"/>
  
  <link href="https://akilar.top/"/>
  <updated>2021-05-27T08:47:05.000Z</updated>
  <id>https://akilar.top/</id>
  
  <author>
    <name>Akilar</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>工信部举报腾讯的正确姿势</title>
    <link href="https://akilar.top/posts/b5324e2c/"/>
    <id>https://akilar.top/posts/b5324e2c/</id>
    <published>2021-05-27T08:47:05.000Z</published>
    <updated>2021-05-27T08:47:05.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在最前"><a href="#写在最前" class="headerlink" title="写在最前"></a>写在最前</h1><details cyan><summary> 事情的起因 </summary>              <div class='content'>              <p>事情的起因还要从4月27日说起，当时恰好我的博客满10w访问量和2w访客，可谓双喜临门，然后在大学同学问及域名的时候顺手在QQ空间评论区敲出了带协议的完整域名。紧接着，QQ空间秒吞了我的评论。当天晚上，我的域名就被腾讯拦截了。<br>  <img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/c2982d63.png" alt=""><br>当时也并未如何在意，毕竟在我之前，被误封站点的博主，我多少还是有见过一些的。之后借助腾讯提供的申诉渠道：<a href="https://urlsec.qq.com/check.html">腾讯安全-网址安全中心</a>进行申诉，效率还算快，当天申诉，隔天就能正常访问了。</p><p>原本这件事情应该就这么揭过了，出于一贯的贴心考量，我还顺手发了一条公告，告诉群友不要重蹈我的覆辙。但我当时还没有意识到问题的严重性。<br>  <img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/a8c59fa5.png" alt=""><br>一直到5月12日，腾讯的骚操作让我着实大吃一惊。包括我在内，几乎所有在群内曝光过域名的博主的站点域名都被拦截。一问之下才知道，其中一部分人甚至已经在申诉通过后又被拦截，和腾讯反复拉锯多达5次。<br>抱怨腾讯吃相难看之余，我的站点也开始遇到同样的问题，在第二次被拦截，申诉，申诉通过之后，当天晚上又被拦截。这时候我也总算是意识到确实是有某个人或者某一群人带着恶意在幕后操作了。</p><div class="note info flat"><p>通过腾讯提供的站长申诉渠道，我了解到我的站点被安上莫须有罪名的页面恰好是访问量最高的主页和美化日记文章帖。既然如此，就有理由怀疑是有人恶意举报了。<br>没事。冤有头债有主，既然找不到搞小动作的喽啰，我就直接到工信部找腾讯的麻烦。</p></div>              </div>            </details><h1 id="投诉渠道"><a href="#投诉渠道" class="headerlink" title="投诉渠道"></a>投诉渠道</h1><p>工信部提供的投诉渠道：<br><div class="tag link"><a class="link-card" title="互联网信息服务投诉平台" href="https://ts.isc.org.cn/#/complaint/info?type=1"><div class="left"><img src="https://cdn.jsdelivr.net/gh/Akilarlxh/akilarlxh.github.io/img/siteicon/favicon.ico"/></div><div class="right"><p class="text">互联网信息服务投诉平台</p><p class="url">https://ts.isc.org.cn/#/complaint/info?type=1</p></div></a></div></p><h1 id="问题梳理"><a href="#问题梳理" class="headerlink" title="问题梳理"></a>问题梳理</h1><p>这里就需要列举一下腾讯这波骚操作都恶心在哪里了。</p><ol><li>借助腾讯对国内即时通讯软件的垄断，使用腾讯QQ、微信等软件内置的浏览器，强行拦截站点域名。</li><li>无视国家法律法规，擅自使用自己的一套规则，恶意拦截屏蔽已经在ICP备案的站点（ICP备案由工信部主管）。</li><li>在申诉通过，确定站点无问题可以放行之后，立刻又重新拦截。反复无常，戏弄用户。这点也是最恶心人的。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/bdb2ca5c.png" alt=""></li><li>在申诉通道，除了申诉服务以外，还有一个品牌经营管家，借此推广腾讯的品牌保护服务。价格更是高的令人咋舌。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/4bb6d597.png" alt=""><h1 id="举报流程"><a href="#举报流程" class="headerlink" title="举报流程"></a>举报流程</h1></li><li>进入<a href="https://ts.isc.org.cn/">互联网信息服务投诉平台</a>,选择<kbd>我要投诉</kbd>，拉到最下，勾选<kbd>我已阅读投诉须知并同意隐私政策</kbd>，待倒计时结束后点击最下方的<kbd>我要投诉</kbd><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/24fa4919.png" alt=""></li><li>选择互联网企业投诉。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/49241c78.png" alt=""></li><li>在<kbd>搜索投诉企业</kbd>中搜索<strong>腾讯</strong>，之后填写个人信息，注意要填真实信息，验证通过后进入<kbd>填写投诉内容</kbd>页面。<div class="note primary flat"><p>抱着调侃的心态补充一下，要是担心所谓的南山必胜客的话，大可不必，若是你向国家投诉，而被投诉方却来找你麻烦，我想国内各大新闻媒体都会很乐意采访报导一下此事的。至少博主觉得，把自己的价值和国家公信力以及腾讯的品牌放在一起比较一下，应该还不至于为此被找麻烦。</p></div></li><li><kbd>投诉企业</kbd>默认为<strong>腾讯</strong>，<kbd>一级问题</kbd>选择<kbd>企业投诉机制</kbd>，<kbd>二级问题</kbd>选择<kbd>投诉电话、渠道</kbd>，<kbd>三级问题</kbd>选择<kbd>投诉渠道不畅</kbd>，<kbd>投诉业务</kbd>选择<kbd>不良举报</kbd>，<kbd>企业服务账号</kbd>为涉及账号，原本应该是QQ被封就填写QQ号，微信被封就填写微信号，但是此时我们是被拦截了站点域名，而此处的<kbd>企业服务账号</kbd>必须是能被联系到的账号，无奈，只能填写QQ号了。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/0feb4543.png" alt=""></li><li><kbd>投诉标题</kbd>必须精炼简洁，一句话概况，填写<code>举报腾讯使用内置浏览器恶意拦截站点域名并借机推广品牌保护收费服务</code>，言简意赅。</li><li><kbd>问题详情</kbd>则是详细论述腾讯的恶心操作。注意正确反映问题，用语文明。以下提供本人编写的案例：<div class="note success no-icon flat"><p>在2021年XX月XX日至今，腾讯QQ在毫无依据的情况下对我的站点（<code>https://你的站点域名</code>）进行了拦截。 之后我借由腾讯方提供的申诉通道（<code>https://urlsec.qq.com/complain.html</code>）申请恢复访问了XX次。 在腾讯方判定我的网页没有问题，可以解封，且我未对网站内容做任何更改的情况下，立刻又一次拦截我的站点。<br>而通过腾讯提供的网站安全检测（<code>https://urlsec.qq.com/check.html</code>），却反馈说在我的站点未检测到任何风险。 腾讯这种在软件内强制使用腾讯方内置浏览器，使用腾讯方自己的规则，无视国家相关法律法规，单方面毫无理由，毫无根据，肆无忌惮的拦截屏蔽他人的站点域名，且通过反复要求用户申请恢复访问之后又重新拦截的行为，一次又一次的戏弄用户。已经严重触犯了用户的正常权益。<br>腾讯还同时推出品牌保护服务，以收费（最低5400元/年）要求来保证域名不会被拦截屏蔽。这种行为已经完全可以定义为勒索。是借助腾讯对国内即时聊天软件的垄断，强制敛财。<br>强烈要求贵部对腾讯实施警告制裁，要求其停止在腾讯QQ等软件中强制使用内置浏览器，同时无理由拦截用户站点域名，借此强制推广品牌保护等收费服务的勒索行为。</p></div></li><li>同时附上附件作为论据，贴合上述投诉详情。<details red><summary> 附件 </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/e2242038.png" alt="检测无风险"><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/bdb2ca5c.png" alt="提示已解封"><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/c2982d63.png" alt="立刻又封禁"><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/4bb6d597.png" alt="收费服务"></p>              </div>            </details><h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1>很显然，有人会说，这样有什么用？国家和腾讯穿一条裤子的，估计最后还是不了了之。<br>抛开对国家的不信任这顶大帽子。姑且顺着这个思路走下去。<br>如果不发声，任由事态发展，难道就能改变什么吗？是指望腾讯良心发现，还是指望国家力量神兵天降，亦或者是市场调控不可见手？<br>醒醒吧。不作为，不会改变什么。<div class="tabs" id="马丁"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#马丁-1">English</button></li><li class="tab"><button type="button" data-href="#马丁-2">中文</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="马丁-1"><blockquote><p>In Germany, they first came for the Communists, and I didn’t speak up because I wasn’t a Communist.<br>Then they came for the Jews,<br>and I didn’t speak up because I wasn’t a Jew.<br>Then they came for the trade unionists,<br>and I didn’t speak up because I wasn’t a trade unionist.<br>Then they came for the Catholics,<br>and I didn’t speak up because I was a Protestant.<br>Then they came for me，<br>but by that time， there was no one left to speak up.</p><footer><strong>Martin Niemoller</strong><cite>1945</cite></footer></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="马丁-2"><blockquote><p>在德国，<br>起初他们追杀Communist主义者，我没有说话———因为我不是Communist主义者；<br>接着他们追杀犹太人，我没有说话———因为我不是犹太人；<br>后来他们追杀工会成员，我没有说话———因为我不是工会成员；<br>此后他们追杀天主教徒，我没有说话———因为我是新教教徒；<br>最后他们奔我而来，却再也没有人站出来为我说话了。</p><footer><strong>马丁·尼莫尔</strong><cite>1945</cite></footer></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li></ol>]]></content>
    
    
    <summary type="html">关于我一而再再而三被腾讯恶意拦截以至于怒而到工信部举报腾讯这件事。</summary>
    
    
    
    <category term="🍬Akilarの泡泡糖" scheme="https://akilar.top/categories/%F0%9F%8D%ACAkilar%E3%81%AE%E6%B3%A1%E6%B3%A1%E7%B3%96/"/>
    
    
    <category term="💥负能量" scheme="https://akilar.top/tags/%F0%9F%92%A5%E8%B4%9F%E8%83%BD%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>糖果屋の一千零一夜</title>
    <link href="https://akilar.top/posts/5844b41a/"/>
    <id>https://akilar.top/posts/5844b41a/</id>
    <published>2021-05-11T13:41:56.000Z</published>
    <updated>2021-05-11T13:41:56.000Z</updated>
    
    <content type="html"><![CDATA[<details cyan><summary> 更新记录 </summary>              <div class='content'>              <div class="timeline"><p class='p h2'>博客编写方案</p><div class="timenode"><div class="meta"><p><p>2021-05-11:归纳部分不算在美化和优化日记内的教程帖</p></p></div><div class="body"><ol><li>新增Atom插件安装和推荐</li><li>新增hexo-editor配置</li><li>新增利用Atom实现平滑升级主题</li><li>新增利用python脚本动态更新hosts实现访问github</li><li>新增外挂标签简单写法丰富文章标签内容</li><li>新增npm图床使用方案，提供舒适传图体验</li></ol></div></div></div>              </div>            </details><h1 id="编辑器安装和配置"><a href="#编辑器安装和配置" class="headerlink" title="编辑器安装和配置"></a>编辑器安装和配置</h1><p>挑选一款合适的编辑器，能够在写作过程中提供更加舒适的体验。</p><p>对本站教程已经很熟悉的读者可以使用<code>Atom</code>，因为之后的很多操作都是基于这款编辑器的。理论上<code>Atom</code>能做到的<code>VScode</code>也能做到，这个就看各自的插件市场趋同性如何了。</p><p>初学者可以先使用<code>Hexo-editor</code>，这款编辑器虽然很久没更新了，但是胜在为<code>Hexo</code>量身打造，而且快捷键丰富，适合还不熟悉<code>Markdown</code>语法的萌新。如果要想长久的写博客，并且打算深入学习的话，这款新手编辑器已经无法满足需求了。权且可以当做练习markdown语法的过度产品。<br><div class="tabs" id="编辑器"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#编辑器-1">Atom（玩法更丰富）</button></li><li class="tab"><button type="button" data-href="#编辑器-2">Hexo-editor（初学者推荐）</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="编辑器-1"><div class="note primary flat"><p><a href="/posts/498e6e74/">Atom插件安装和推荐</a></p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="编辑器-2"><div class="note primary flat"><p><a href="/posts/1da4f99e/">Hexo-editor——Hexo专用的编辑器</a></p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><h1 id="平滑升级魔改后的Hexo主题"><a href="#平滑升级魔改后的Hexo主题" class="headerlink" title="平滑升级魔改后的Hexo主题"></a>平滑升级魔改后的Hexo主题</h1><p>前置教程为<code>Atom插件安装和推荐</code><br><div class="note primary flat"><p><a href="/posts/bbf68ad4/">平滑升级魔改后的Hexo主题</a></p></div></p><h1 id="github-faster"><a href="#github-faster" class="headerlink" title="github faster"></a>github faster</h1><p>使用<code>python</code>爬虫脚本快速更新本地<code>hosts</code>映射，实现访问<code>github</code>。有效解决<code>github</code>的<code>dns</code>污染问题。<br><div class="note primary flat"><p><a href="/posts/61b3e163/">访问github或部署在gitpage上的网站过慢的解决方案</a></p></div></p><h1 id="DIY外挂标签的简单写法与应用"><a href="#DIY外挂标签的简单写法与应用" class="headerlink" title="DIY外挂标签的简单写法与应用"></a>DIY外挂标签的简单写法与应用</h1><p>这篇教程的主要目的是给博客编写增加更多趣味，把一些好看的标签写成外挂标签来使用。<br><div class="note primary flat"><p><a href="/posts/e2bf861f/">DIY外挂标签的简单写法与应用</a></p></div></p><h1 id="npm图床的使用技巧"><a href="#npm图床的使用技巧" class="headerlink" title="npm图床的使用技巧"></a>npm图床的使用技巧</h1><p>现在最常见的应该就是<code>github+jsdelivr</code>图床，但是<code>jsdelivr</code>对<code>github</code>的50MB包大小上限设置非常恼人，还要提心吊胆的提防不知道啥时候会到来的封号审查。与之相比，<code>npm</code>图床不仅国内镜像节点多，而且没有大小上限限制。而且与<code>github</code>图床的方案可以并存。<br><div class="note primary flat"><p><a href="/posts/3e956346/">npm图床的使用技巧</a></p></div></p><h1 id="大神博客"><a href="#大神博客" class="headerlink" title="大神博客"></a>大神博客</h1><div class="site-card-group"><a class="site-card" href="https://zfe.one"><div class="img"><img src="https://cdn.jsdelivr.net/gh/Akilarlxh/ScreenShot@gh-pages/zfe.one.jpg"/></div><div class="info"><img src="https://zfe.space/images/headimage.png"/><span class="title">小冰博客</span><span class="desc">做个有梦想的人！</span></div></a><a class="site-card" href="https://www.antmoe.com/"><div class="img"><img src="https://cdn.jsdelivr.net/gh/Akilarlxh/ScreenShot@gh-pages/www.antmoe.com.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/avatar.jpg"/><span class="title">Dreamy.TZK</span><span class="desc">小康博客，Butterfly优雅魔改</span></div></a><a class="site-card" href="https://blog.hclonely.com/"><div class="img"><img src="https://cdn.jsdelivr.net/gh/Akilarlxh/ScreenShot@v1.2/blog.hclonely.com.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/HCLonely/blog.hclonely.com@latest/img/avatar.jpg"/><span class="title">HCLonely</span><span class="desc">丰富的第三方插件魔改</span></div></a><a class="site-card" href="https://blog.zykjofficial.top/"><div class="img"><img src="https://cdn.jsdelivr.net/gh/Akilarlxh/ScreenShot@gh-pages/blog.zykjofficial.top.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/zykjofficial/zykjofficial.github.io@master/img/avatar.png"/><span class="title">卓越科技</span><span class="desc">Remarkable life,for science and technology.</span></div></a><a class="site-card" href="/link/"><div class="img"><img src=""/></div><div class="info"><span class="title">虚位以待</span><span class="desc">糖果屋友人帐诚邀投稿</span></div></a></div>]]></content>
    
    
    <summary type="html">总结本人的博客实用技巧，包括编辑器配置，图床使用方案，github host脚本，主提升级方案等。</summary>
    
    
    
    <category term="🍡Akilarの糖葫芦" scheme="https://akilar.top/categories/%F0%9F%8D%A1Akilar%E3%81%AE%E7%B3%96%E8%91%AB%E8%8A%A6/"/>
    
    
    <category term="📁Hexo" scheme="https://akilar.top/tags/%F0%9F%93%81Hexo/"/>
    
  </entry>
  
  <entry>
    <title>npm图床的使用技巧</title>
    <link href="https://akilar.top/posts/3e956346/"/>
    <id>https://akilar.top/posts/3e956346/</id>
    <published>2021-05-11T10:33:02.000Z</published>
    <updated>2021-05-11T10:33:02.000Z</updated>
    
    <content type="html"><![CDATA[<details cyan><summary> 点击查看更新记录 </summary>              <div class='content'>              <div class="timeline"><p class='p h2'>更新记录</p><div class="timenode"><div class="meta"><p><p>2021-05-11:基本使用步骤</p></p></div><div class="body"><ol><li>picgo+jsDelivr+github的基本使用方案</li><li>配合npm使用，得以享受npm的繁多国内镜像</li><li>新增github action，持续自动化发布package</li><li>一些个人习惯总结。</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-05-11:基本使用步骤</p></p></div><div class="body"><ol><li>感谢<a href="https://blog.cyfan.top/">@CYF</a>反馈，新增一行指令。</li><li><code>npm version patch</code>更新末尾指令号。</li></ol></div></div></div>              </div>            </details><details yellow><summary> 点击查看参考教程 </summary>              <div class='content'>              <div class="table-container"><table><thead><tr><th style="text-align:left">参考方向</th><th style="text-align:left">教程原贴</th></tr></thead><tbody><tr><td style="text-align:left">烂大街的Picgo使用教程</td><td style="text-align:left"><a href="https://www.itrhx.com/2019/08/01/A27-image-hosting/">Github+jsDelivr+PicGo 打造稳定快速、高效免费图床</a></td></tr><tr><td style="text-align:left">一些关于jsDelivr的使用注意事项</td><td style="text-align:left"><a href="https://www.antmoe.com/posts/e33d1c55/index.html">小康—优雅使用 JsDeliver 加速文件</a></td></tr><tr><td style="text-align:left">参考了npm图床的基本使用技巧和各种国内镜像</td><td style="text-align:left"><a href="https://blog.cyfan.top/p/eb490c73.html">CYF—图床的千层套路</a></td></tr><tr><td style="text-align:left">npm发包和常见错误排查</td><td style="text-align:left"><a href="https://blog.zhheo.com/p/e751c470.html">HEO—将项目首次发布到npm过程实录和教程</a></td></tr><tr><td style="text-align:left">github action发布npm包的基本方案</td><td style="text-align:left"><a href="https://www.antmoe.com/posts/8c0d5ccc/">小康—Github 之 Actions 自动发布 npm 包</a></td></tr><tr><td style="text-align:left">picgo的进阶项目</td><td style="text-align:left"><a href="https://blog.imzjw.cn/posts/8f9a47ec/">小嘉—介绍一个 GitHub + jsDelivr 图床神器</a></td></tr></tbody></table></div>              </div>            </details><details purple><summary> 店长的碎碎念 </summary>              <div class='content'>              <p>这篇帖子总结了大部分图床的使用方案，秉承着白嫖精神，坚决不花一分钱。因为是在目前最普罗大众的picgo方案上进行拓展，参考了chenyfan的npm图床方案，白嫖npm丰富的国内镜像节点。同时分享一些我平时写博客的习惯。希望在看完这篇以后，读者能够爱上写图文教程。</p>              </div>            </details><h1 id="Picgo或者Picx配置方案"><a href="#Picgo或者Picx配置方案" class="headerlink" title="Picgo或者Picx配置方案"></a>Picgo或者Picx配置方案</h1><p>这一步是为了实现图片上传至Github仓库。<br><div class="note warning flat"><ol><li>GitHub图床仓库大小不能超过 1G。因为GitHub原则上是反对仓库图床化的，当仓库超过 1G 后会有人工审核仓库内容，如果发现用来做图床，轻则删库重则封号。需注意。</li><li>因为jsDelivr加速的单文件大小为50M。这也就限制了单张图片大小上限。</li></ol></div><br><div class="tabs" id="图床配置"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#图床配置-1">Picgo</button></li><li class="tab"><button type="button" data-href="#图床配置-2">Picx（推荐）</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="图床配置-1"><ol><li>首先创建一个图床仓库用来存放图片，仓库名随意。以下会以<code>[AssetsRepo]</code>指代这个静态资源仓库。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/c3fffaba.png" alt=""></li><li>访问<a href="https://github.com/settings/tokens">Github-&gt;头像（右上角）-&gt;Settings-&gt;Developer Settings-&gt;Personal access tokens</a>-&gt;<kbd>generate new token</kbd>,创建的<code>Token</code>名称随意，但必须勾选<code>repo</code>项。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/PISlRDgrsBXzcLK.png" alt=""><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/yF8cNUkmAJVBSuw.png" alt=""><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/20200923085908748.png" alt=""><div class="note warning flat"><p><code>token</code>只会显示这一次，之后将无法查看，所以务必保证你已经记录下了<code>Token</code>。之后如果忘记了就只能重新生成重新配置了。</p></div></li><li>下载Picgo软件，可以直接访问Picgo的github仓库，在<a href="https://github.com/Molunerfinn/picgo/releases">release</a>中下载最新版本的安装包。<br><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/Molunerfinn/picgo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=Molunerfinn&repo=picgo&show_owner=true"/></a></li><li>打开Picgo，找到图床设置，选择<code>Github图床</code>，根据指示填写对应内容。<ul><li>设定仓库名：[UserName]/[AssetsRepo]</li><li>设定分支名：2020年10月后github新建仓库默认分支改为<code>main</code>,在这之前的是<code>master</code>。</li><li>设定Token：填入第二步时申请到的<code>Token</code></li><li>指定存储路径：这是存放图片的路径，这里可以直接写<code>/</code>表示存放在根目录。</li><li>设定自定义域名：在图片上传后，PicGo会按照<code>自定义域名+指定储存路径+上传的图片名</code>的方式生成访问链接，并放到粘贴板上，例如要使用<code>jsDelivr</code>加速，则设置为<code>https://cdn.jsdelivr.net/gh/[UserName]/[AssetsRepo]</code>，上传完毕后，我们就可以通过<code>https://cdn.jsdelivr.net/gh/[UserName]/[AssetsRepo]/指定存储路径/图片名</code>加速访问我们的图片了。</li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="图床配置-2"><ol><li>首先创建一个图床仓库用来存放图片，仓库名随意。以下会以<code>[AssetsRepo]</code>指代这个静态资源仓库。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/c3fffaba.png" alt=""></li><li>访问<a href="https://github.com/settings/tokens">Github-&gt;头像（右上角）-&gt;Settings-&gt;Developer Settings-&gt;Personal access tokens</a>-&gt;<kbd>generate new token</kbd>,创建的<code>Token</code>名称随意，但必须勾选<code>repo</code>项。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/PISlRDgrsBXzcLK.png" alt=""><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/yF8cNUkmAJVBSuw.png" alt=""><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/20200923085908748.png" alt=""><div class="note warning flat"><p><code>token</code>只会显示这一次，之后将无法查看，所以务必保证你已经记录下了<code>Token</code>。之后如果忘记了就只能重新生成重新配置了。</p></div></li><li><a href="https://picx.xpoet.cn/">PicX官网</a>就已经提供了构建好的项目，可以通过直接在官方提供的网站填入<code>Token</code>来使用。<br><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/XPoet/picx"><img src="https://github-readme-stats.vercel.app/api/pin/?username=XPoet&repo=picx&show_owner=true"/></a></li><li>若是不满足于官方的网站，想要个性化一点，也可以参考小嘉的教程，配置属于自己的<code>PicX</code>。<div class="tag link"><a class="link-card" title="介绍一个 GitHub + jsDelivr 图床神器" href="https://blog.imzjw.cn/posts/8f9a47ec/"><div class="left"><img src="https://cdn.jsdelivr.net/gh/zjwo/CDN/img/blog/avatar.jpg"/></div><div class="right"><p class="text">介绍一个 GitHub + jsDelivr 图床神器</p><p class="url">https://blog.imzjw.cn/posts/8f9a47ec/</p></div></a></div></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><h1 id="npm图床的使用"><a href="#npm图床的使用" class="headerlink" title="npm图床的使用"></a>npm图床的使用</h1><details green><summary> 点击查看npm图床的使用 </summary>              <div class='content'>              <ol><li>首先需要注册一个npm的账号。访问<a href="https://www.npmjs.com/signup/">npm注册页面</a><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/a935a0d4.png" alt=""></li><li>完成邮箱验证，注册完成后进入账号管理界面:<kbd>头像</kbd>-&gt;<kbd>Account</kbd>，应该会在左上角看到<code>You have not verified your email address</code>字样的提示，点击以后按提示步骤验证你的邮箱。</li><li>找到我们之前创建的图床仓库，在本地合适的位置把它<code>clone</code>下来。找个空文件夹打开终端输入<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:[username]/[AssetsRepo].git</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/[username]/[AssetsRepo].git</span><br></pre></td></tr></table></figure></li><li>在clone下来的[AssetsRepo]文件夹内打开终端，输入以下指令切换回原生源<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure></li><li>添加本地npm用户设置<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 仅第一次使用需要添加用户，之后会提示你输入你的npm账号密码以及注册邮箱</span></span><br><span class="line">npm adduser</span><br><span class="line"><span class="comment"># 非第一次使用直接登录即可，之后会提示你输入你的npm账号密码以及注册邮箱</span></span><br><span class="line">npm login</span><br></pre></td></tr></table></figure></li><li>运行npm初始化指令，把整个图床仓库打包，按照指示进行配置，注意需要事先确认你的包名没有和别人已发布的包重复，可以在<a href="https://www.npmjs.com/">npm官网</a>搜索相应包名，搜不到就说明还没被占用。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/6000c029.png" alt=""><br>最后会输出一段package.json，请求确认，输入yes即可。</li><li>然后输入发布指令，我们就可以把包发布到npm上了。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure></li><li>jsdelivr+npm的图片引用和jsdelivr+github很相似，例如我在<code>[AssetsRepo]</code>仓库里存放的<code>/img/index.png</code><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># jsDelivr+github链接</span></span><br><span class="line">https://cdn.jsdelivr.net/gh/[GithubUserName]/[AssetsRepo]/img/index.png</span><br><span class="line"><span class="comment"># jsDelivr+npm链接</span></span><br><span class="line">https://cdn.jsdelivr.net/npm/[NpmPackageName]/img/index.png</span><br></pre></td></tr></table></figure><div class="note success flat"><p>可以看到Npm只需要提供包名即可。这也是一开始要求包名不重复的原因之一</p></div></li><li>如果每次都要在本地进行<code>npm publish</code>的话，npm的提交是整个包一起上传的，不存在增量更新，耗时不说，而且还往往需要架梯子才能正常上传。所以我们可以把它交给github action来完成。<ul><li>在<a href="https://www.npmjs.com/">npm官网</a>-&gt;<kbd>头像</kbd>-&gt;<kbd>Access Tokens</kbd>-&gt;<kbd>Generate New Token</kbd>,勾选<kbd>Automation</kbd>选项，<code>Token</code>只会显示这一次，之后如果忘记了就只能重新生成重新配置了。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/0e884db2.png" alt=""><br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/0158bc90.png" alt=""></li><li>在github的[AssetsRepo]仓库设置项里添加一个名为<code>NPM_TOKEN</code>的<code>secrets</code>，把获取的Npm的Access token输入进去。<br><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/c6dbbfb5.png" alt=""></li><li>在本地的<code>[AssetsRepo]</code>文件夹下新建<code>[AssetsRepo]/.github/workflows/autopublish.yml</code>,<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Node.js</span> <span class="string">Package</span></span><br><span class="line"><span class="comment"># 监测图床分支，2020年10月后github新建仓库默认分支改为main，记得更改</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-npm:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;12.x&quot;</span></span><br><span class="line">          <span class="attr">registry-url:</span> <span class="string">https://registry.npmjs.org/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.npm_token&#125;&#125;</span></span><br></pre></td></tr></table></figure></li><li>在本地的<code>[AssetsRepo]</code>文件夹下打开终端，运行以下指令，上传新增内容至github，即可触发部署。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将更改提交</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;npm publish&quot;</span></span><br><span class="line"><span class="comment"># 更新package版本号</span></span><br><span class="line">npm version patch</span><br><span class="line"><span class="comment"># 推送至github触发action</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>此处的四行指令顺序严格。<br>每次更新npm图床都需要先修改<code>[AssetsRepo]\package.json</code>里的<code>version</code>,也就是版本号。<br>而<code>npm version patch</code>即为更新package.json里的版本号的指令，效果是末尾版本号+1，例如<code>0.0.1=&gt;0.0.2</code>、<code>1.1.3=&gt;1.1.4</code>。免去了打开<code>package.json</code>再修改版本号的麻烦。（大版本更新还是需要手动改的）<br>更新npm图床务必要记得更新<code>package.json</code>里的版本号！</p></div></li></ul></li></ol>              </div>            </details><h1 id="配合编辑器的使用流程"><a href="#配合编辑器的使用流程" class="headerlink" title="配合编辑器的使用流程"></a>配合编辑器的使用流程</h1><details blue><summary> 点击查看配合Atom使用 </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/fVwSyU7abiN1zW6.jpg" alt="施工中。。。。。。不妨跟着参考教程自己探索呀"></p>              </div>            </details><h1 id="TO-DO"><a href="#TO-DO" class="headerlink" title="TO DO"></a>TO DO</h1><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>参考内容罗列</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>编写picgo的使用图文教程</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>编写picx的使用图文教程</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>编写npm图床的使用图文教程</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>Atom相应插件及使用技巧</p>            </div>]]></content>
    
    
    <summary type="html">picgo+jsDelivr+github的进阶教程，在这一基础上增加npm图床的活用方式，使用github action实现自动发布。</summary>
    
    
    
    <category term="🍡Akilarの糖葫芦" scheme="https://akilar.top/categories/%F0%9F%8D%A1Akilar%E3%81%AE%E7%B3%96%E8%91%AB%E8%8A%A6/"/>
    
    
    <category term="🌌糖果屋の一千零一夜" scheme="https://akilar.top/tags/%F0%9F%8C%8C%E7%B3%96%E6%9E%9C%E5%B1%8B%E3%81%AE%E4%B8%80%E5%8D%83%E9%9B%B6%E4%B8%80%E5%A4%9C/"/>
    
    <category term="🗺️图床" scheme="https://akilar.top/tags/%F0%9F%97%BA%EF%B8%8F%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
  <entry>
    <title>Friend link subscription</title>
    <link href="https://akilar.top/posts/8480b91c/"/>
    <id>https://akilar.top/posts/8480b91c/</id>
    <published>2021-04-29T23:28:21.000Z</published>
    <updated>2021-04-29T00:13:21.000Z</updated>
    
    <content type="html"><![CDATA[<details cyan><summary> 点击查看更新记录 </summary>              <div class='content'>              <div class="timeline"><p class='p h2'>更新记录</p><div class="timenode"><div class="meta"><p><p>2021-02-12:内测版v0.1</p></p></div><div class="body"><ol><li>应援冰老师的友链朋友圈项目，提供Hexo的插件化魔改方案；</li><li>按照惯有思路，将API路径的配置添加到配置文件中。</li><li>在页面配置中使用<code>type: fcircle</code>来实现加载友链朋友圈页面。</li><li>适配样式UI，使得友链朋友圈文章样式同时间轴样式。</li><li>适配pjax。</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-04-29:新增npm插件</p></p></div><div class="body"><ol><li>适配冰老师最新的前端方案。</li><li>使用npm插件加载。</li><li>新增配置项，均为可选。</li><li>预留开发者接口，后续可能适配多主题样式。</li></ol></div></div></div>              </div>            </details><details yellow><summary> 点击查看参考教程 </summary>              <div class='content'>              <div class="table-container"><table><thead><tr><th style="text-align:left">参考方向</th><th style="text-align:left">教程原贴</th></tr></thead><tbody><tr><td style="text-align:left">冰老师的友链朋友圈项目</td><td style="text-align:left"><a href="https://zfe.space/post/friend-link-circle.html">基于hexo的友链朋友圈 Beta1.0</a></td></tr><tr><td style="text-align:left">冰老师编写的前端项目</td><td style="text-align:left"><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/Zfour/Butterfly-friend-poor-html"><img src="https://github-readme-stats.vercel.app/api/pin/?username=Zfour&repo=Butterfly-friend-poor-html&show_owner=true"/></a></td></tr></tbody></table></div>              </div>            </details><h1 id="写在最前"><a href="#写在最前" class="headerlink" title="写在最前"></a>写在最前</h1><div class="tip cogs faa-horizontal animated"><p>本帖为对冰老师的友链朋友圈项目的前端配置方案进行主题插件化适配的应援帖，并不包括关键的后端配置内容。后端配置请参看冰老师的原帖<a href="https://zfe.space/post/friend-link-circle.html">基于hexo的友链朋友圈 Beta1.0</a>，本帖的内容对应原帖的<code>步骤四：配置 HEXO 页面</code>。考虑到冰老师的源项目也仍旧处于开发状态，故本帖也会尽可能的紧跟进度实时更新。</p></div><h1 id="npm插件方案"><a href="#npm插件方案" class="headerlink" title="npm插件方案"></a>npm插件方案</h1><details red><summary> 新版npm插件方案 </summary>              <div class='content'>              <ol><li>安装插件，在博客根目录<code>[Blogroot]</code>下打开终端，运行以下指令： <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-butterfly-fcircle --save</span><br></pre></td></tr></table></figure></li><li>添加配置信息<br>在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fcircle</span></span><br><span class="line"><span class="comment"># see https://zfe.space/friendcircle/</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/8480b91c/</span></span><br><span class="line"><span class="attr">fcircle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关</span></span><br><span class="line">  <span class="attr">apiurl:</span> <span class="string">https://hexo-circle-of-friends-api.vercel.app/api</span> <span class="comment">#api地址</span></span><br><span class="line">  <span class="attr">maxnumber:</span> <span class="number">20</span> <span class="comment">#【可选】页面展示文章数量</span></span><br><span class="line">  <span class="attr">addnumber:</span> <span class="number">10</span> <span class="comment">#【可选】每次加载增加的篇数</span></span><br><span class="line">  <span class="attr">opentype:</span> <span class="string">&#x27;_blank&#x27;</span> <span class="comment">#【可选】&#x27;_blank&#x27;打开新标签,&#x27;_self&#x27;本窗口打开,默认为&#x27;_blank&#x27;</span></span><br><span class="line">  <span class="attr">nofollow:</span> <span class="literal">true</span> <span class="comment">#【可选】开启禁止搜索引擎抓取,默认开启</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="comment">#【可选】加载动画图片链接</span></span><br><span class="line">  <span class="attr">css:</span> <span class="comment">#【可选】开发者接口，自定义css链接</span></span><br><span class="line">  <span class="attr">js:</span> <span class="comment">#【可选】开发者接口，自定义js链接</span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment">#【可选】fcircle的路径名称。默认为 fcircle，生成的页面为 fcircle/index.html</span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment">#【可选】fcircle页面的 front_matter 配置</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">朋友圈</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li>参数释义</li></ol><div class="table-container"><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">备选值/类型</th><th style="text-align:left">释义</th></tr></thead><tbody><tr><td style="text-align:left">enable</td><td style="text-align:left"><kbd>true</kbd>/<kbd>false</kbd></td><td style="text-align:left">控制开关</td></tr><tr><td style="text-align:left">apiurl</td><td style="text-align:left"><kbd>URL</kbd></td><td style="text-align:left">api链接，配置教程参看<a href="https://zfe.space/friendcircle/">基于 hexo 的友链朋友圈</a></td></tr><tr><td style="text-align:left">maxnumber</td><td style="text-align:left"><kbd>number</kbd></td><td style="text-align:left">【可选】填写阿拉伯数字，页面展示文章数量，默认20</td></tr><tr><td style="text-align:left">addnumber</td><td style="text-align:left"><kbd>number</kbd></td><td style="text-align:left">【可选】填写阿拉伯数字，每次加载增加的篇数，默认10</td></tr><tr><td style="text-align:left">opentype</td><td style="text-align:left"><kbd>_blank</kbd><kbd>_self</kbd></td><td style="text-align:left">【可选】’_blank’新标签打开,’_self’本窗口打开,默认为’_blank’</td></tr><tr><td style="text-align:left">nofollow</td><td style="text-align:left"><kbd>true</kbd>/<kbd>false</kbd></td><td style="text-align:left">【可选】开启禁止搜索引擎抓取,默认开启</td></tr><tr><td style="text-align:left">preload</td><td style="text-align:left"><kbd>URL</kbd></td><td style="text-align:left">【可选】加载动画图片链接</td></tr><tr><td style="text-align:left">css</td><td style="text-align:left"><kbd>URL</kbd></td><td style="text-align:left">【可选】开发者接口，自定义css链接</td></tr><tr><td style="text-align:left">js</td><td style="text-align:left"><kbd>URL</kbd></td><td style="text-align:left">【可选】开发者接口，自定义js链接</td></tr><tr><td style="text-align:left">path</td><td style="text-align:left"><kbd>string</kbd></td><td style="text-align:left">【可选】字符串，fcircle的路径名称。默认为 fcircle，生成的页面为 fcircle/index.html</td></tr><tr><td style="text-align:left">front_matter</td><td style="text-align:left"><kbd>object</kbd></td><td style="text-align:left">【可选】写法见上文示例，fcircle页面的 front_matter 配置</td></tr></tbody></table></div>              </div>            </details><h1 id="魔改源码方案"><a href="#魔改源码方案" class="headerlink" title="魔改源码方案"></a>魔改源码方案</h1><details cyan><summary> 旧版修改源码方案 </summary>              <div class='content'>              <h2 id="资源下载"><a href="#资源下载" class="headerlink" title="资源下载"></a>资源下载</h2><div class="tip cogs faa-horizontal animated"><p><strong>由于本教程涉及的所有修改对缩进格式等有严格要求，担心自己控制不好的可以直接下载静态资源。参照教程进行修改。</strong></p></div><div class="btns rounded center">            <a class="button" href='https://wwe.lanzoui.com/iCIS2ln7hpi' title='下载资源文件'><i class='fas fa-download'></i>下载资源文件</a>          </div><div class="note info flat"><div class="hide-block"><button type="button" class="hide-button button--animated" style="">预览效果    </button><div class="hide-content"><p><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/Friend-link-subscription-dfbba739.png" alt=""></p></div></div></div><h2 id="魔改步骤"><a href="#魔改步骤" class="headerlink" title="魔改步骤"></a>魔改步骤</h2><details purple open><summary> 点击查看魔改正文 </summary>              <div class='content'>              <ol><li>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\fcircle.pug</code>;<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#article-container</span></span><br><span class="line">  <span class="keyword">if</span> top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  <span class="keyword">if</span> theme.fcircle.enable</span><br><span class="line">    <span class="comment">#friend_link_circle</span></span><br><span class="line">      .article-sort-title 统计信息</span><br><span class="line">      .article-sort      </span><br><span class="line">        <span class="comment">#info_user_poor</span></span><br><span class="line">          .chart</span><br><span class="line">            span.friend_post_info_title 当前友链数:</span><br><span class="line">            span.friend_post_info_number &#123;&#123;user_lenth&#125;&#125;个</span><br><span class="line">            br</span><br><span class="line">            span.friend_post_info_title 失败数:</span><br><span class="line">            span.friend_post_info_number &#123;&#123;error&#125;&#125;个</span><br><span class="line">            br</span><br><span class="line">          .chart</span><br><span class="line">            span.friend_post_info_title 活跃友链数:</span><br><span class="line">            span.friend_post_info_number &#123;&#123;unique_live_link&#125;&#125;个</span><br><span class="line">            br</span><br><span class="line">            span.friend_post_info_title 当前库存:</span><br><span class="line">            span.friend_post_info_number &#123;&#123;listlenth&#125;&#125;篇</span><br><span class="line">            br</span><br><span class="line">          .chart</span><br><span class="line">            span.friend_post_info_title 今日更新:</span><br><span class="line">            span.friend_post_info_number &#123;&#123;today_post&#125;&#125;篇</span><br><span class="line">            br</span><br><span class="line">            span.friend_post_info_title 最近更新:</span><br><span class="line">            span.friend_post_info_number &#123;&#123;last_update_time&#125;&#125;</span><br><span class="line">      div(v-<span class="keyword">for</span>=<span class="string">&#x27;datalist in datalist_slice&#x27;</span>)</span><br><span class="line">        .article-sort-title(v-<span class="keyword">if</span>=<span class="string">&#x27;datalist[2]-maxnumber&lt;0&#x27;</span>) &#123;&#123;datalist[<span class="number">0</span>]&#125;&#125;</span><br><span class="line">        .article-sort</span><br><span class="line">          .article-sort-item(v-<span class="keyword">if</span>=<span class="string">&#x27;item[6]-maxnumber&lt;0&#x27;</span> v-<span class="keyword">for</span>=<span class="string">&#x27;(item,i) in datalist[1]&#x27;</span>)</span><br><span class="line">            a.article-sort-item-img(:target=<span class="string">&#x27;opentype&#x27;</span> :href=<span class="string">&#x27;item[2]&#x27;</span> :title=<span class="string">&#x27;item[0]&#x27;</span>)</span><br><span class="line">              img.entered.loaded(onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.flink) + `&#x27;</span>` data-ll-status=<span class="string">&#x27;loaded&#x27;</span> :src=<span class="string">&#x27;item[4]&#x27;</span>)</span><br><span class="line">            .article-sort-item-info</span><br><span class="line">              .article-sort-item-time</span><br><span class="line">                i.far.fa-user</span><br><span class="line">                span &#123;&#123;item[<span class="number">3</span>]&#125;&#125;</span><br><span class="line">                .friend_post_time</span><br><span class="line">                  i.far.fa-calendar-alt</span><br><span class="line">                  time.post-meta-date-created(:datetime=<span class="string">&#x27;item[1]&#x27;</span> :title=<span class="string">&#x27;item[1]&#x27;</span>) &#123;&#123;item[<span class="number">1</span>]&#125;&#125;</span><br><span class="line">              a.article-sort-item-title(:target=<span class="string">&#x27;opentype&#x27;</span> :href=<span class="string">&#x27;item[2]&#x27;</span> :title=<span class="string">&#x27;item[0]&#x27;</span>) &#123;&#123;item[<span class="number">0</span>]&#125;&#125;</span><br><span class="line">      div(style=<span class="string">&#x27;text-align: center&#x27;</span>)</span><br><span class="line">        button.load_button(v-<span class="keyword">if</span>=<span class="string">&#x27;loadmore_display&#x27;</span> <span class="built_in">type</span>=<span class="string">&#x27;button&#x27;</span> @click=<span class="string">&#x27;addmaxnumber()&#x27;</span>) 加载更多...</span><br><span class="line">      script.</span><br><span class="line">        requests_url = <span class="string">&#x27;!&#123;url_for(theme.fcircle.apiurl)&#125;&#x27;</span></span><br><span class="line">      script(defer data-pjax src=url_for(theme.CDN.fcircle))</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure></li><li>新建<code>[Blogroot]\themes\butterfly\source\css\_page\fcircle.styl</code>,<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> hexo-config(<span class="string">&#x27;fcircle.enable&#x27;</span>)</span><br><span class="line">  <span class="selector-id">#info_user_poor</span></span><br><span class="line">    <span class="attribute">display</span> flex</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">2px</span></span><br><span class="line">  <span class="selector-class">.friend_post_info_title</span></span><br><span class="line">    <span class="attribute">font-weight</span> <span class="number">700</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.friend_post_info_number</span></span><br><span class="line">    <span class="attribute">float</span> right</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.chart</span></span><br><span class="line">    <span class="attribute">align-items</span> flex-start</span><br><span class="line">    <span class="attribute">flex</span> <span class="number">1</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">100px</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">60px</span></span><br><span class="line">    <span class="attribute">margin</span> <span class="number">20px</span> <span class="number">0px</span></span><br><span class="line">    <span class="selector-tag">span</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">120px</span></span><br><span class="line">      <span class="attribute">white-space</span> nowrap</span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">text-overflow</span> ellipsis</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.article-sort-item-time</span></span><br><span class="line">    <span class="selector-tag">span</span></span><br><span class="line">      <span class="attribute">padding-left</span> <span class="number">10px</span></span><br><span class="line">      <span class="attribute">padding-right</span> <span class="number">10px</span></span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-class">.article-sort-item-title</span></span><br><span class="line">    -webkit-line-clamp: <span class="number">1</span></span><br><span class="line">  <span class="selector-class">.load_button</span></span><br><span class="line">    -webkit-<span class="attribute">transition-duration</span> <span class="number">0.4s</span></span><br><span class="line">    <span class="attribute">transition-duration</span> <span class="number">0.4s</span></span><br><span class="line">    <span class="attribute">text-align</span> center</span><br><span class="line">    <span class="attribute">border</span> <span class="number">1px</span> solid <span class="number">#ededed</span></span><br><span class="line">    <span class="attribute">border-radius</span> .<span class="number">3em</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">background</span> transparent</span><br><span class="line">    <span class="attribute">color</span> <span class="number">#555</span></span><br><span class="line">    <span class="attribute">padding</span> .<span class="number">5em</span> <span class="number">1.25em</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">color</span> <span class="number">#3090e4</span></span><br><span class="line">      <span class="attribute">border-color</span> <span class="number">#3090e4</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">500px</span>)</span><br><span class="line">    .friend_post_time</span><br><span class="line">      float right</span><br><span class="line"></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>)</span><br><span class="line">    #info_user_poor</span><br><span class="line">      padding <span class="number">10px</span></span><br><span class="line">      flex-direction column</span><br><span class="line">      <span class="attribute">max-height</span> <span class="number">200px</span></span><br><span class="line">    .chart</span><br><span class="line">      flex <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">160px</span></span><br><span class="line">      margin <span class="number">0</span></span><br></pre></td></tr></table></figure></li><li>新建<code>[Blogroot]\themes\butterfly\source\js\fcircle.js</code>,这是处理友链数据的脚本：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> friend_link_circle = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#friend_link_circle&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">datalist</span>: [],</span><br><span class="line">        <span class="attr">datalist_slice</span>:[],</span><br><span class="line">        <span class="attr">maxnumber</span>:<span class="number">20</span>,</span><br><span class="line">        <span class="attr">addnumber</span>:<span class="number">10</span>,</span><br><span class="line">        <span class="attr">display</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">loadmore_display</span>:<span class="literal">false</span>,</span><br><span class="line">        <span class="attr">listlenth</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">today_post</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">last_update_time</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">user_lenth</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">error</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">unique_live_link</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">opentype</span>:<span class="string">&#x27;_blank&#x27;</span>  <span class="comment">//&#x27;_blank&#x27;打开新标签,&#x27;_self&#x27;本窗口打开</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        unique (arr) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">formatDate</span>(<span class="params">strDate</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(strDate.replace(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>)));</span><br><span class="line">                <span class="keyword">let</span> gettimeoffset = <span class="number">0</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getTimezoneOffset())&#123;</span><br><span class="line">                    gettimeoffset = <span class="keyword">new</span> <span class="built_in">Date</span>().getTimezoneOffset();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    gettimeoffset = <span class="number">8</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">let</span> timeoffset = gettimeoffset * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">                <span class="keyword">let</span> len = date.getTime();</span><br><span class="line">                <span class="keyword">let</span> date2 = <span class="keyword">new</span> <span class="built_in">Date</span>(len - timeoffset);</span><br><span class="line">                <span class="keyword">let</span> sec = date2.getSeconds().toString();</span><br><span class="line">                <span class="keyword">let</span> min =  date2.getMinutes().toString();</span><br><span class="line">                <span class="keyword">if</span> (sec.length === <span class="number">1</span>) &#123;</span><br><span class="line">                    sec = <span class="string">&quot;0&quot;</span> + sec;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (min.length === <span class="number">1</span>) &#123;</span><br><span class="line">                    min = <span class="string">&quot;0&quot;</span> + min;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> date2.getFullYear().toString() + <span class="string">&quot;/&quot;</span> + (date2.getMonth() + <span class="number">1</span>).toString() + <span class="string">&quot;/&quot;</span> + date2.getDate().toString() + <span class="string">&quot; &quot;</span> + date2.getHours().toString() + <span class="string">&quot;:&quot;</span> + min + <span class="string">&quot;:&quot;</span> + sec</span><br><span class="line">            &#125;<span class="keyword">catch</span>(e)&#123;<span class="keyword">return</span> <span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">timezoon</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> time = <span class="built_in">this</span>.datalist_slice[<span class="number">0</span>][<span class="number">1</span>][<span class="number">0</span>][<span class="number">5</span>];</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.formatDate(time)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">todaypost</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> date= <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">            <span class="keyword">let</span> year = date.getFullYear();</span><br><span class="line">            <span class="keyword">let</span> month =(date.getMonth() + <span class="number">1</span>).toString();</span><br><span class="line">            <span class="keyword">let</span> day = (date.getDate()).toString();</span><br><span class="line">            <span class="keyword">if</span> (month.length === <span class="number">1</span>) &#123;</span><br><span class="line">                month = <span class="string">&quot;0&quot;</span> + month;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (day.length === <span class="number">1</span>) &#123;</span><br><span class="line">                day = <span class="string">&quot;0&quot;</span> + day;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>  year + <span class="string">&quot;-&quot;</span> + month + <span class="string">&quot;-&quot;</span> + day</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">addmaxnumber</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.maxnumber = <span class="built_in">this</span>.maxnumber + <span class="built_in">this</span>.addnumber;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.maxnumber &gt;= <span class="built_in">this</span>.listlenth)&#123;</span><br><span class="line">                <span class="built_in">this</span>.loadmore_display=<span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">slice</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> monthlist=[];</span><br><span class="line">            <span class="keyword">let</span> datalist=[];</span><br><span class="line">            <span class="keyword">let</span> data_slice = data;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> data_slice) &#123;</span><br><span class="line">                data_slice[item].push(item);</span><br><span class="line">                <span class="keyword">if</span> (data_slice[item][<span class="number">1</span>].lenth !== <span class="number">10</span>) &#123;</span><br><span class="line">                    <span class="keyword">let</span> list = data_slice[item][<span class="number">1</span>].split(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                        <span class="keyword">if</span> (list[<span class="number">1</span>].length &lt; <span class="number">2</span>)&#123;</span><br><span class="line">                            list[<span class="number">1</span>]=<span class="string">&quot;0&quot;</span> + list[<span class="number">1</span>]</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (list[<span class="number">2</span>].length &lt; <span class="number">2</span>)&#123;</span><br><span class="line">                            list[<span class="number">2</span>]=<span class="string">&quot;0&quot;</span> + list[<span class="number">2</span>]</span><br><span class="line">                        &#125;</span><br><span class="line">                    data_slice[item][<span class="number">1</span>] = list.join(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                <span class="keyword">let</span> month=data_slice[item][<span class="number">1</span>].slice(<span class="number">0</span>,<span class="number">7</span>);</span><br><span class="line">                <span class="keyword">if</span>(monthlist.indexOf(month) !== -<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(month);</span><br><span class="line">                    datalist[monthlist.length-<span class="number">1</span>][<span class="number">1</span>].push(data_slice[item]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    monthlist.push(month);</span><br><span class="line">                    datalist.push([month,[data_slice[item]]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> mounthgroup  <span class="keyword">of</span> datalist)&#123;</span><br><span class="line">                mounthgroup.push(mounthgroup[<span class="number">1</span>][<span class="number">0</span>][<span class="number">6</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">console</span>.log(datalist);</span><br><span class="line">            <span class="keyword">return</span> datalist</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mounted</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        fetch(requests_url).then(</span><br><span class="line">            <span class="function"><span class="params">data</span> =&gt;</span> data.json()</span><br><span class="line">    ).then(</span><br><span class="line">            <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> today = <span class="built_in">this</span>.todaypost();</span><br><span class="line">                <span class="keyword">let</span> Datetody = <span class="keyword">new</span> <span class="built_in">Date</span>(today);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> item = <span class="number">0</span>; item &lt;data[<span class="number">1</span>].length ;item++)&#123;</span><br><span class="line">                    <span class="keyword">let</span> Datedate = <span class="keyword">new</span> <span class="built_in">Date</span>(data[<span class="number">1</span>][item][<span class="number">1</span>])</span><br><span class="line">                    <span class="keyword">if</span> (Datedate&gt;Datetody)&#123;</span><br><span class="line">                        data[<span class="number">1</span>].splice(item --, <span class="number">1</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">&#x27;穿越了&#x27;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">this</span>.datalist = data[<span class="number">1</span>];</span><br><span class="line">                <span class="built_in">this</span>.listlenth = data[<span class="number">1</span>].length;</span><br><span class="line">                <span class="built_in">this</span>.user_lenth = data[<span class="number">0</span>].length;</span><br><span class="line">                <span class="built_in">this</span>.datalist_slice = <span class="built_in">this</span>.slice(data[<span class="number">1</span>]);</span><br><span class="line">                <span class="built_in">this</span>.last_update_time =<span class="built_in">this</span>.timezoon();</span><br><span class="line">                <span class="built_in">this</span>.loadmore_display = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">let</span> link_list=[];</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> data[<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="keyword">if</span> (item[<span class="number">1</span>] === today )&#123;</span><br><span class="line">                        <span class="built_in">this</span>.today_post +=<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    link_list.push(item[<span class="number">3</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">let</span> arr = <span class="built_in">this</span>.unique(link_list);</span><br><span class="line">                <span class="built_in">this</span>.unique_live_link = arr.length;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> data[<span class="number">0</span>])&#123;</span><br><span class="line">                    <span class="keyword">if</span> (item[<span class="number">3</span>] === <span class="string">&#x27;true&#x27;</span> )&#123;</span><br><span class="line">                        <span class="built_in">this</span>.error +=<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li>修改<code>[Blogroot]\themes\butterfly\layout\page.pug</code>,添加朋友圈页面的选项：<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">  block content</span><br><span class="line">    #page</span><br><span class="line">      case page.type</span><br><span class="line">        when &#x27;tags&#x27;</span><br><span class="line">          include includes/page/tags.pug</span><br><span class="line">        when &#x27;link&#x27;</span><br><span class="line">          include includes/page/flink.pug</span><br><span class="line">        when &#x27;categories&#x27;</span><br><span class="line">          include includes/page/categories.pug</span><br><span class="line">        when &#x27;artitalk&#x27;</span><br><span class="line">          include includes/page/artitalk.pug</span><br><span class="line"><span class="addition">+       when &#x27;fcircle&#x27;</span></span><br><span class="line"><span class="addition">+         include includes/page/fcircle.pug</span></span><br><span class="line">        default</span><br><span class="line">          include includes/page/default-page.pug</span><br><span class="line"></span><br><span class="line">      if page.comments !== false &amp;&amp; theme.comments &amp;&amp; theme.comments.use</span><br><span class="line">        - var commentsJsLoad = true</span><br><span class="line">        !=partial(&#x27;includes/third-party/comments/index&#x27;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br></pre></td></tr></table></figure></li><li>修改<code>[Blogroot]\themes\butterfly\layout\includes\additional-js.pug</code>,添加<code>vue.js</code>依赖的配置项,<code>butterfly_v3.4.0+</code>移除了<code>jquery</code>，所以没有<code>script(src=url_for(theme.CDN.jquery))</code>这一行。<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  div</span><br><span class="line">    script(src=url_for(theme.CDN.utils))</span><br><span class="line">    script(src=url_for(theme.CDN.main))</span><br><span class="line"><span class="addition">+   script(src=url_for(theme.CDN.vue))</span></span><br><span class="line">    if theme.translate.enable</span><br><span class="line">      script(src=url_for(theme.CDN.translate))</span><br></pre></td></tr></table></figure></li><li>修改<code>[Blogroot]\_config.butterfly.yml</code>,添加友链页面菜单栏，CDN链接和配置项：<ul><li>添加菜单栏<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  menu:</span><br><span class="line">    博客: / || fas fa-home</span><br><span class="line">    时间轴: /archives/ || fas fa-archive</span><br><span class="line">    标签: /tags/ || fas fa-tags</span><br><span class="line">    分类: /categories/ || fas fa-folder-open</span><br><span class="line"><span class="addition">+   朋友圈: /fcircle/ || fa fa-puzzle-piece</span></span><br><span class="line">    友人帐: /link/ || fas fa-link</span><br><span class="line">    留言板: /comments/ || fas fa-comments</span><br></pre></td></tr></table></figure></li><li>添加CDN配置项：<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  CDN:</span><br><span class="line">    # main</span><br><span class="line">    main_css: /css/index.css</span><br><span class="line">    jquery: https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js</span><br><span class="line">    main: https://cdn.jsdelivr.net/gh/Akilarlxh/Akilarlxh.github.io@bf_3.6.2_1/js/main.js</span><br><span class="line">    utils: https://cdn.jsdelivr.net/gh/Akilarlxh/Akilarlxh.github.io@bf_3.6.2_1/js/utils.js</span><br><span class="line"><span class="addition">+   vue: https://cdn.jsdelivr.net/npm/vue@2.6.11  # vue.js依赖</span></span><br><span class="line"><span class="addition">+   fcircle: /js/fcircle.js # 友链朋友圈</span></span><br></pre></td></tr></table></figure></li><li>添加配置项：<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#友链朋友圈</span></span><br><span class="line"><span class="attr">fcircle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#开关友链</span></span><br><span class="line">  <span class="attr">apiurl:</span> <span class="string">https://hexo-circle-of-friends-api.vercel.app/api</span></span><br><span class="line">  <span class="comment"># 改为冰老师原帖步骤三：配置 vercel api中获取的api链接</span></span><br></pre></td></tr></table></figure></li></ul></li><li>使用指令生成友链页面,并添加样式<ul><li>在<code>[Blogroot]</code>路径下打开终端，运行以下指令生成朋友圈页面：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page fcircle</span><br></pre></td></tr></table></figure></li><li>打开刚刚生成的朋友圈页面<code>[Blogroot]\source\fcircle\index.md</code>,添加页面类型，以引入友链朋友圈：<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  ---</span><br><span class="line">    title: Akilarの朋友圈</span><br><span class="line">    date: 2021-02-11 18:09:00</span><br><span class="line"><span class="addition">+   type: &quot;fcircle&quot;</span></span><br><span class="line">    comments: &quot;true&quot;</span><br><span class="line">  ---</span><br></pre></td></tr></table></figure></li></ul></li><li>运行<code>hexo clean</code> 和<code>hexo generate</code>以及<code>hexo server</code>三件套以后就可以看到友链预览了。</li></ol>              </div>            </details>              </div>            </details><h1 id="TO-DO"><a href="#TO-DO" class="headerlink" title="TO DO"></a>TO DO</h1><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>前端配置魔改</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>前端配置npm插件化</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>多主题适配</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>重写统计部分UI</p>            </div>]]></content>
    
    
    <summary type="html">应援冰老师的友链朋友圈项目，提供插件化的Butterfly主题配置</summary>
    
    
    
    <category term="🍡Akilarの糖葫芦" scheme="https://akilar.top/categories/%F0%9F%8D%A1Akilar%E3%81%AE%E7%B3%96%E8%91%AB%E8%8A%A6/"/>
    
    
    <category term="📁Hexo" scheme="https://akilar.top/tags/%F0%9F%93%81Hexo/"/>
    
    <category term="🦋Butterfly" scheme="https://akilar.top/tags/%F0%9F%A6%8BButterfly/"/>
    
    <category term="🧊Ice-🍬Candy" scheme="https://akilar.top/tags/%F0%9F%A7%8AIce-%F0%9F%8D%ACCandy/"/>
    
  </entry>
  
  <entry>
    <title>信笺样式留言板</title>
    <link href="https://akilar.top/posts/e2d3c450/"/>
    <id>https://akilar.top/posts/e2d3c450/</id>
    <published>2021-04-23T15:15:06.000Z</published>
    <updated>2021-04-23T15:15:06.000Z</updated>
    
    <content type="html"><![CDATA[<details cyan><summary> 点击查看更新记录 </summary>              <div class='content'>              <div class="timeline"><p class='p h2'>更新记录</p><div class="timenode"><div class="meta"><p><p>2021-04-23</p></p></div><div class="body"><ol><li>继承旧版方案大多数样式</li><li>修复和medium_zoom之间存在的兼容性bug</li><li>变动配置方式，使用type: ‘envelope’控制页面内容</li><li>新增配置项，方便读者改动信笺内容而无需读懂代码</li><li>暂不推荐使用fancybox，因为无法解决它强制套壳导致的偏移错位。</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-04-25</p></p></div><div class="body"><ol><li>新增npm插件化安装方式</li><li>暂不支持留言板换行</li><li>未能解决转义问题</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-04-28</p></p></div><div class="body"><ol><li>发布npm插件正式版1.0.0</li><li>支持留言板正文多行文本</li></ol></div></div></div>              </div>            </details><h1 id="资源下载"><a href="#资源下载" class="headerlink" title="资源下载"></a>资源下载</h1><div class="tip cogs faa-horizontal animated"><p><strong>由于本教程涉及的所有修改对缩进格式等有严格要求，担心自己控制不好的可以直接下载静态资源。参照教程进行修改。</strong></p></div><div class="note info flat"><div class="hide-block"><button type="button" class="hide-button button--animated" style="">预览效果    </button><div class="hide-content"><p><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/A7DXgfwFJujLCzE.png" alt=""></p></div></div></div><h1 id="魔改步骤"><a href="#魔改步骤" class="headerlink" title="魔改步骤"></a>魔改步骤</h1><div class="tabs" id="commentsbar-"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#commentsbar--1">npm插件安装方式（推荐）</button></li><li class="tab"><button type="button" data-href="#commentsbar--2">修改源码方式</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="commentsbar--1"><ol><li>在<code>[Blogroot]</code>运行指令<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-butterfly-envelope --save</span><br></pre></td></tr></table></figure></li><li>在站点配置文件或者主题配置文件添加配置项（对，两者任一均可。但不要都写）<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># envelope_comment</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/58900a8/</span></span><br><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#开关</span></span><br><span class="line">  <span class="attr">cover:</span> <span class="string">https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg</span> <span class="comment">#信笺封面图</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺内容，支持多行</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#信笺结束语，只能单行</span></span><br><span class="line">  <span class="attr">height:</span> <span class="comment">#调整信笺划出高度，默认1050px</span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment">#【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html</span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment">#【可选】comments页面的 front_matter 配置</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">留言板</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="commentsbar--2"><ol><li>新建<code>[Blogroot]\hemes\butterfly\layout\includes\page\envelope.pug</code><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  #maincontent</span><br><span class="line">    #form-wrap</span><br><span class="line">      img#beforeimg(src=&#x27;https://cdn.jsdelivr.net/gh/Akilarlxh/Valine-Admin@v1.0/source/img/before.png&#x27;)</span><br><span class="line">      #envelope</span><br><span class="line">        form</span><br><span class="line">          .formmain</span><br><span class="line">            img.headerimg(src=url_for(theme.envelope_comment.cover))</span><br><span class="line">            .comments-main</span><br><span class="line">              h3.title3=`来自` + config.author + `的留言:`</span><br><span class="line">              .comments</span><br><span class="line">                each i in theme.envelope_comment.message</span><br><span class="line">                  div=`$&#123;i&#125;`</span><br><span class="line">              .bottomcontent</span><br><span class="line">                img.bottomimg(src=&#x27;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&#x27;)</span><br><span class="line">              p.bottomhr=`$&#123;theme.envelope_comment.bottom&#125;`</span><br><span class="line">      img#afterimg(src=&#x27;https://cdn.jsdelivr.net/gh/Akilarlxh/Valine-Admin@v1.0/source/img/after.png&#x27;)</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure></li><li>新建<code>[Blogroot]\themes\butterfly\source\css\_layout\commentsbar.styl</code><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> hexo-config(<span class="string">&#x27;envelope_comment.enable&#x27;</span>)</span><br><span class="line">  <span class="variable">$hoverHeight</span> = hexo-config(<span class="string">&#x27;envelope_comment.height&#x27;</span>) ? convert(hexo-config(<span class="string">&#x27;envelope_comment.height&#x27;</span>)) : <span class="number">1050px</span></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>)</span><br><span class="line">    #beforeimg,</span><br><span class="line">    #afterimg</span><br><span class="line">      display none !important</span><br><span class="line"></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">600px</span>)</span><br><span class="line">    #article-container</span><br><span class="line">      img</span><br><span class="line">        margin <span class="number">0</span> auto <span class="number">0rem</span></span><br><span class="line">    #form-wrap</span><br><span class="line">      overflow hidden</span><br><span class="line">      <span class="attribute">height</span> <span class="number">447px</span></span><br><span class="line">      position relative</span><br><span class="line">      top <span class="number">0px</span></span><br><span class="line">      transition all <span class="number">1s</span> ease-in-out .<span class="number">3s</span></span><br><span class="line">      z-index <span class="number">0</span></span><br><span class="line">      &amp;:<span class="attribute">hover</span></span><br><span class="line">        <span class="attribute">height</span> $<span class="attribute">hover</span>Height</span><br><span class="line">        top -<span class="number">200px</span></span><br><span class="line">    #maincontent</span><br><span class="line">      <span class="attribute">width</span> <span class="number">530px</span></span><br><span class="line">      margin <span class="number">20px</span> auto <span class="number">0</span></span><br><span class="line">    #beforeimg</span><br><span class="line">      position absolute</span><br><span class="line">      bottom <span class="number">126px</span></span><br><span class="line">      left <span class="number">0px</span></span><br><span class="line">      background-repeat no-repeat</span><br><span class="line">      <span class="attribute">width</span> <span class="number">530px</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">317px</span></span><br><span class="line">      z-index -<span class="number">100</span></span><br><span class="line">      pointer-events none</span><br><span class="line">    #afterimg</span><br><span class="line">      position absolute</span><br><span class="line">      bottom -<span class="number">2px</span></span><br><span class="line">      left <span class="number">0</span></span><br><span class="line">      background-repeat no-repeat</span><br><span class="line">      <span class="attribute">width</span> <span class="number">530px</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">259px</span></span><br><span class="line">      z-index <span class="number">100</span></span><br><span class="line">      pointer-events none</span><br><span class="line">    #envelope</span><br><span class="line">      position relative</span><br><span class="line">      overflow visible</span><br><span class="line">      <span class="attribute">width</span> <span class="number">500px</span></span><br><span class="line">      margin <span class="number">0px</span> auto</span><br><span class="line">      transition all <span class="number">1s</span> ease-in-out .<span class="number">3s</span></span><br><span class="line">      padding-top <span class="number">200px</span></span><br><span class="line"></span><br><span class="line">  .headerimg</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    overflow hidden</span><br><span class="line">    pointer-events none</span><br><span class="line"></span><br><span class="line">  .formmain</span><br><span class="line">    background white</span><br><span class="line">    <span class="attribute">width</span> <span class="number">95%</span></span><br><span class="line">    <span class="attribute">max-width</span> <span class="number">800px</span></span><br><span class="line">    margin auto auto</span><br><span class="line">    border-radius <span class="number">5px</span></span><br><span class="line">    border <span class="number">1px</span> solid</span><br><span class="line">    overflow hidden</span><br><span class="line">    -webkit-box-shadow <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.12</span>)</span><br><span class="line">    box-shadow <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.18</span>)</span><br><span class="line">  .comments-main</span><br><span class="line">    padding <span class="number">5px</span> <span class="number">20px</span></span><br><span class="line">  .title3</span><br><span class="line">    text-decoration none</span><br><span class="line">    <span class="attribute">color</span> $theme-color</span><br><span class="line">    text-align center</span><br><span class="line">  .comments</span><br><span class="line">    text-align center</span><br><span class="line">    border-bottom #ddd <span class="number">1px</span> solid</span><br><span class="line">    border-left #ddd <span class="number">1px</span> solid</span><br><span class="line">    padding-bottom <span class="number">20px</span></span><br><span class="line">    background-color #eee</span><br><span class="line">    margin <span class="number">15px</span> <span class="number">0px</span></span><br><span class="line">    padding-left <span class="number">20px</span></span><br><span class="line">    padding-right <span class="number">20px</span></span><br><span class="line">    border-top #ddd <span class="number">1px</span> solid</span><br><span class="line">    border-right #ddd <span class="number">1px</span> solid</span><br><span class="line">    padding-top <span class="number">20px</span></span><br><span class="line"></span><br><span class="line">  .bottomcontent</span><br><span class="line">    text-align center</span><br><span class="line">    margin-top <span class="number">40px</span></span><br><span class="line"></span><br><span class="line">  .bottomimg</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    margin <span class="number">5px</span> auto <span class="number">5px</span> auto</span><br><span class="line">    display block</span><br><span class="line">    pointer-events none</span><br><span class="line"></span><br><span class="line">  .bottomhr</span><br><span class="line">    font-size <span class="number">12px</span></span><br><span class="line">    text-align center</span><br><span class="line">    <span class="attribute">color</span> #<span class="number">999</span></span><br><span class="line"></span><br><span class="line">  [data-theme=&#x27;dark&#x27;]</span><br><span class="line">    .formmain</span><br><span class="line">      background rgb(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">    .comments</span><br><span class="line">      background rgba(<span class="number">90</span>, <span class="number">90</span>, <span class="number">90</span>, <span class="number">0.8</span>)</span><br></pre></td></tr></table></figure></li><li>修改<code>[Blogroot]\themes\butterfly\layout\page.pug</code><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">block content</span><br><span class="line">  #page</span><br><span class="line">    case page.type</span><br><span class="line">      when &#x27;tags&#x27;</span><br><span class="line">        include includes/page/tags.pug</span><br><span class="line">      when &#x27;link&#x27;</span><br><span class="line">        include includes/page/flink.pug</span><br><span class="line">      when &#x27;categories&#x27;</span><br><span class="line">        include includes/page/categories.pug</span><br><span class="line">      when &#x27;artitalk&#x27;</span><br><span class="line">        include includes/page/artitalk.pug</span><br><span class="line"><span class="addition">+     when &#x27;envelope&#x27;</span></span><br><span class="line"><span class="addition">+       include includes/page/envelope.pug</span></span><br><span class="line">    default</span><br><span class="line">      include includes/page/default-page.pug</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[Blogroot]\_config.butterfly.yml</code>,新增配置项</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#开关</span></span><br><span class="line">  <span class="attr">cover:</span> <span class="string">https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg</span> <span class="comment">#信笺封面图</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺内容，支持多行</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#信笺结束语，只能单行</span></span><br><span class="line">  <span class="attr">height:</span> <span class="comment">#调整信笺划出高度，默认1050px</span></span><br></pre></td></tr></table></figure></li><li><p>新建留言板页面（已有的不用重复操作。）<br>在<code>[Blogroot]</code>打开终端，输入</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page comments</span><br></pre></td></tr></table></figure></li><li>打开<code>[Blogroot]\source\comments\index.md</code><br>将其内容修改为：<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 留言板</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">type: &#x27;envelope&#x27;</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="TO-DO"><a href="#TO-DO" class="headerlink" title="TO DO"></a>TO DO</h1><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>重构代码结构</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>配置项提取</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>npm插件化</p>            </div><details purple><summary> 点击查看旧版方案 </summary>              <div class='content'>              <div class="note warning flat"><p>此方案为旧版方案，代码结构较为混乱，且与fancybox、medium_zoom之间存在较多兼容性bug，不推荐使用。</p></div><h1 id="留言板动态弹出信封样式"><a href="#留言板动态弹出信封样式" class="headerlink" title="留言板动态弹出信封样式"></a>留言板动态弹出信封样式</h1><ol><li>原本是我为<a href="https://github.com/Akilarlxh/Valine-Admin">Valine-Admin</a>写的邮件样式，看到留言板光秃秃的不好看，就拿过来用了。</li><li>纯CSS3实现。理论上适用于任何主题。</li><li>信笺样式取材自小康大佬修改的Valine-admin中的薇尔莉特邮件样式。<br><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/Dreamy-TZK/Valine-Admin-Server"><img src="https://github-readme-stats.vercel.app/api/pin/?username=Dreamy-TZK&repo=Valine-Admin-Server&theme=calm&show_owner=true"/></a></li><li>可以自定义在页面中自定义头图，并修改css中的图片上升高度。</li><li>由于使用了盒子绝对定位。宽度过低时信封会疯狂错位，故写了两个样式。设置为低于一定宽度后自动隐藏信封。<div class="hide-block"><button type="button" class="hide-button button--animated" style="">预览效果 </button><div class="hide-content"><p><img src="https://cdn.jsdelivr.net/npm/akilar-candyassets/image/A7DXgfwFJujLCzE.png" alt=""></p></div></div></li></ol><h1 id="修改步骤"><a href="#修改步骤" class="headerlink" title="修改步骤"></a>修改步骤</h1><ol><li><p>新建留言板页面（已有的不用重复操作。）<br>在<code>[Blogroot]</code>打开终端，输入</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page comments</span><br></pre></td></tr></table></figure></li><li><p>打开<code>[Blogroot]\source\comments\index.md</code><br>将其内容修改为：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 留言板</span><br><span class="line"><span class="section">top<span class="emphasis">_img:</span></span></span><br><span class="line"><span class="emphasis"><span class="section">---</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/commentsbar.css&quot;</span>/&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;computer&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;maincontent&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;form-wrap&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Akilarlxh/Valine-Admin@v1.0/source/img/before.png&quot;</span> <span class="attr">id</span>=<span class="string">&quot;beforeimg&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">        <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;envelope&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;formmain&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">              <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;headerimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg&quot;</span>/&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">              <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 5px 20px;&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                  <span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">calss</span>=<span class="string">&quot;title3&quot;</span>&gt;</span></span>来自Akilar的留言:<span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;<span class="name">center</span> <span class="attr">class</span>=<span class="string">&quot;comments&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                  有什么想问的？<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                  有什么想说的？<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                  有什么想吐槽的？<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                  哪怕是有什么想吃的，都可以告诉我哦~<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottomcontent&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;bottomimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&quot;</span>/&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">                <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;bottomhr&quot;</span>&gt;</span></span>自动书记人偶竭诚为您服务！<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">              <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">        <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;afterimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Akilarlxh/Valine-Admin@v1.0/source/img/after.png&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">      <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">    <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">  <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mobile&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">    <span class="xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;formmain&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;headerimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg&quot;</span> /&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">        <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 5px 20px;&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            <span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title3&quot;</span>&gt;</span></span>来自Akilar的留言:<span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;<span class="name">center</span> <span class="attr">class</span>=<span class="string">&quot;comments&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            有什么想问的？<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            有什么想说的？<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            有什么想吐槽的？<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">            哪怕是有什么想吃的，都可以告诉我哦~<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottomcontent&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bottomhr&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">          <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;bottomhr&quot;</span>&quot;&gt;</span></span>自动书记人偶竭诚为您服务！<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">        <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">      <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">    <span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="section">  <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br></pre></td></tr></table></figure></li><li>在<code>[Blogroot]\themes\butterfly\source\css\</code>目录下新建<code>commentsbar.css</code><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 滚动条隐藏 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 禁用图片点击,butterfly渲染后会给图片套上fancybox，点开后会造成信笺偏移*/</span></span><br><span class="line"><span class="selector-class">.formmain</span>&#123;</span><br><span class="line">   <span class="attribute">pointer-events</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* top-img隐藏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 宽度小于530px隐藏信封 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">530px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#computer</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">530px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#mobile</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">0rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#form-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">447px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease-in-out .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 调整信封划出高度，换信笺内容以后可在此设置height */</span></span><br><span class="line"><span class="selector-id">#form-wrap</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1050px</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#beforeimg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">126px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">317px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">100</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#afterimg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">259px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#envelope</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: visible;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span> auto;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease-in-out .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#maincontent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> auto <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.headerimg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.formmain</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto auto;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.12</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.18</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title3</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">246</span>, <span class="number">214</span>, <span class="number">175</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comments</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Arial&quot;</span>, <span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="string">&quot;黑体&quot;</span>, <span class="string">&quot;宋体&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottomcontent</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottomimg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span> auto <span class="number">5px</span> auto;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottomhr</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line">  <span class="selector-class">.formmain</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line">  <span class="selector-class">.comments</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">90</span>, <span class="number">90</span>, <span class="number">90</span>, <span class="number">0.8</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="bug归纳"><a href="#bug归纳" class="headerlink" title="bug归纳"></a>bug归纳</h1><ol><li>使用gulp的情况下可能会在压缩html时报错。</li></ol><ul><li>遇到了可以通过在<code>gulpfile.js</code>里设置跳过压缩<code>comments/index.html</code>来避开bug。<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">    gulp.task(&#x27;minify-html&#x27;, () =&gt; &#123;</span><br><span class="line"><span class="deletion">-     return gulp.src(&#x27;./public/**/*.html&#x27;)</span></span><br><span class="line"><span class="addition">+     return gulp.src([&#x27;./public/**/*.html&#x27;,&#x27;!./public/comments/index.html&#x27;])</span></span><br><span class="line">        .pipe(htmlclean())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br></pre></td></tr></table></figure></li></ul>              </div>            </details>]]></content>
    
    
    <summary type="html">给光秃秃的留言板页面添加动态信封。</summary>
    
    
    
    <category term="🍡Akilarの糖葫芦" scheme="https://akilar.top/categories/%F0%9F%8D%A1Akilar%E3%81%AE%E7%B3%96%E8%91%AB%E8%8A%A6/"/>
    
    
    <category term="📁Hexo" scheme="https://akilar.top/tags/%F0%9F%93%81Hexo/"/>
    
    <category term="🦋Butterfly" scheme="https://akilar.top/tags/%F0%9F%A6%8BButterfly/"/>
    
  </entry>
  
</feed>
