---
title: 垃圾分类识别系统安装引导
tags: 毕业设计
abbrlink: 9cd81ac3
date: 2020-05-21 15:18:48
categories:
comments: false
---
# 写在最前
本文所讨论的垃圾分类微信小程序分为用户端和管理员端，用户端基于微信小程序的云开发架构，管理员端使用vue-admin-element集成模块项目作为模板开发。

# 配置微信小程序RecycleOL
## 注册微信小程序
按照[微信官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/getstart.html#%E7%94%B3%E8%AF%B7%E5%B8%90%E5%8F%B7)指示注册微信小程序，直至获取AppID
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521033007399.png)
## 安装开发者工具
下载微信开发者工具
本人所使用的是[稳定版 Stable Build (1.02.2004020)](
https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

下载安装完成后，打开微信开发者工具，选择导入项目，找到RecycleOL，在AppID一栏输入上述步骤中获取的AppID，
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521034252857.png)

<div class="note warning"><p>可能还需要在文件project.config.json中修改appid。

如果导入不成功，请新建微信小程序，在后端服务一栏选择云开发。然后逐个替换文件。并修改文件project.config.json中的appid。</p></div>

## 设置云开发环境
找到云开发，设置，新建云环境。
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521034410852.png)
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521034420972.png)
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521034437693.png)
在云开发平台中找到数据库选项，新建三个数据集：commit，product，sort。
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521034628125.png)
在product和sort数据集中导入product.csv和sort.json的数据。
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521035754010.png)
在cloudfunctions中右键addGarbage、baiduAccessToken、commitToGarbarge，选择上传并部署：所有文件。
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521040004706.png)

## 注册百度AI开放平台

注册[百度AI开放平台](https://ai.baidu.com/tech/imagerecognition/general)账号，进入控制台，选择产品服务->图像识别-概览，创建应用。接口选择图像识别。
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521052759594.png)
创建成功后，在管理应用中可以获取百度开放平台图像识别接口的API Key和SecretKey。
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521052937578.png)
将其填入微信小程序的云函数,找到cloudfunctions->baiduAccessToken->index替换其中的apiKey和secretKey
![](https://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200521053237543.png)

# 配置后台管理RecycleAdmin

## 安装[Node.js](https://nodejs.org/en/)
我下载的是`11.13.0`版本。直接下载最新版本全部默认安装即可。
Node.js是基于Chrome的V8 JavaScript引擎构建的
运行在服务端的JavaScript开发平台,知道这些就够了。
反正作为一个开发环境，安装以后再也不用去打扰它。
默默运行就是了。

## 安装[git](https://git-scm.com/)
我下载的是2.21.0版本，选择安装版,一路默认安装即可。

## 配置RecycleAdmin

找到路径~/RecycleAdmin/src/api/user.js,将env后内容替换成自己的微信小程序云开发环境。
![](http://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200528075656130.png)
还要替换appid和secret为自己的，appsecret可以在微信小程序开发平台主页选择右侧菜单栏->开发->开发设置中找到。
![](http://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200528080229067.png)
![](http://akilar-1259097125.cos.ap-shanghai.myqcloud.com/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/20200528080320116.png)
直接在RecycleAdmin文件夹内右键->git bash here,输入
```
# 安装依赖
npm install
# 建议不要用 cnpm 安装 会有各种诡异的bug 可以通过更换源解决 npm 下载速度慢的问题，以下是阿里云的源
npm install --registry=https://registry.npm.taobao.org

# 本地开发启动项目
npm run dev
```
如果是用的yarn，把启动指令中的npm替换成yarn即可。
