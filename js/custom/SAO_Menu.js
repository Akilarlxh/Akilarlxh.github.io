window.document.oncontextmenu=function(e){return!!e.ctrlKey||(!!/Android|webOS|BlackBerry/i.test(navigator.userAgent)||popMenu(e))};var dv=document.getElementById("SAO-menu"),x=0,y=0,l=0,t=0,isDown=!1;function SAOclose(){document.getElementById("SAO-back").style.display="none"}function SAOinit(){var e=document.querySelectorAll(".active");if(e)for(i=0;i<e.length;i++)e[i].classList.remove("active")}function Menuinit(e){var t=e.querySelectorAll(".active");if(t)for(i=0;i<t.length;i++)t[i].classList.remove("active")}function linkStart(e){e.includes("https://")||e.includes("http://")?window.location.href=e:pjax?pjax.loadUrl(e):window.location.href=e}function clickAudio(){var e=document.getElementById("SAOClick");e&&e.play()}function UtilsClick(){var e=event.target;console.log("click at",e);var t=e.parentElement.querySelector(".menu-list"),n=e.parentElement.querySelector(".user-panel");e.parentElement.querySelector(".active")?(t&&t.className.indexOf("active")>-1&&t.classList.remove("active"),n&&n.className.indexOf("active")>-1&&n.classList.remove("active")):(SAOinit(),t&&t.classList.add("active"),n&&n.classList.add("active"))}function MenusClick(){var e=event.target,t=e.parentElement.querySelector(".menu-child"),n=e.parentElement.parentElement;t&&(t.className.indexOf("active")>-1?t.classList.remove("active"):(Menuinit(n),t.classList.add("active")))}function popMenu(e){SAOinit();var t=document.getElementById("SAOlauncher");t&&t.play(),document.getElementById("SAO-back").style.display="block";var n=document.getElementById("SAO-menu"),i=document.documentElement.clientWidth||document.body.clientWidth,o=document.documentElement.clientHeight||document.body.clientHeight;n.style.display="block";var c=e.clientX,l=e.clientY;return n.style.left=c<230?n.clientWidth/2+230+"px":i-c<320?n.clientWidth/2-320+i+"px":c+n.clientWidth/2+"px",l<n.clientHeight/2+130?n.style.top="130px":o-l<80+n.clientHeight/2?n.style.top=o-n.clientHeight-80+"px":n.style.top=e.clientY-n.clientHeight/2+"px",!1}function openSearch(){document.body.style.cssText="width: 100%;overflow: hidden",document.querySelector("#local-search .search-dialog").style.display="block",document.querySelector("#local-search-input input").focus(),btf.fadeIn(document.getElementById("search-mask"),.5),loadFlag||(search(GLOBAL_CONFIG.localSearch.path),loadFlag=!0),document.addEventListener("keydown",(function e(t){"Escape"===t.code&&(closeSearch(),document.removeEventListener("keydown",e))}))}function openTidio(){window.tidioChatApi.show(),window.tidioChatApi.open()}function Mirror(){let e,t,n;e=window.location.pathname,t=window.location.hostname,"akilar.top"===t?(n="https://akilar.gitee.io"+e,window.alert("即将前往糖果屋分店🍬"),window.location.href=n):"akilar.gitee.io"===t?(n="https://akilar.top"+e,window.alert("正在返回糖果屋本部🍭！"),window.location.href=n):window.alert("Master，本地调试不需要跳转哦！🍫")}function ToComment(){document.getElementById("post-comment")?window.location.href="#post-comment":linkStart("/comments/")}function Logout(){window.opener=null,window.open("","_self"),window.close()}dv.onmousedown=function(e){x=e.clientX,y=e.clientY,l=dv.offsetLeft,t=dv.offsetTop,isDown=!0,dv.style.cursor="move"},window.onmousemove=function(e){if(0!=isDown){var n=e.clientX,i=e.clientY,o=n-(x-l),c=i-(y-t);dv.style.left=o+"px",dv.style.top=c+"px"}},dv.onmouseup=function(){isDown=!1,dv.style.cursor="default"},document.addEventListener("click",(function(e){"SAO-back"===e.target.id&&SAOclose()}));